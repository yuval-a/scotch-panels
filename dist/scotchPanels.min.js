/*
* scotchPanels - v1.0.3 - 2014-09-25
* https://github.com/scotch-io/scotch-panels
* modified fork to support overlay panels:
* https://github.com/yuval-a/scotch-panels
* Copyright (c) 2014 Nicholas Cerminara <nick@scotch.io>
*/
!function(g){"use strict";var d=[],h=!1,f=!1,p=!1,u={containerSelector:"body",type:"html",direction:"top",duration:300,transition:"ease",easingPluginTransition:"easeInCirc",useCSS:!0,useEasingPlugin:!1,imageURL:!1,iframeURL:!1,autoPlayVideo:!0,youtubeID:!1,youTubeTheme:"light",distanceX:"70%",forceMinHeight:!1,minHeight:"200px",closeAfter:0,startOpened:!1,startOpenedDelay:0,clickSelector:!1,enableEscapeKey:!0,hoverSelector:!1,touchSelector:!1,beforePanelOpen:function(){},afterPanelOpen:function(){},beforePanelClose:function(){},afterPanelClose:function(){}};g.fn.scotchPanel=function(e){if(void 0===e&&(e={}),0===this.length)return this;if(1<this.length)return this.each(function(){d.push(g(this).scotchPanel(e))}),d.open=function(){for(var t=0;t<d.length;t++)d[t].open()},d.close=function(){for(var t=0;t<d.length;t++)d[t].close()},d.toggle=function(){for(var t=0;t<d.length;t++)d[t].toggle()},d;var n,s=function(){var t=g(n.settings.containerSelector);t.hasClass("scotchified")||t.wrapInner('<div class="scotch-panel-wrapper"><div class="scotch-panel-canvas"></div></div>').addClass("scotchified"),g(".scotch-panel-wrapper").css({position:"relative",overflow:"hidden",width:"100%"}),g(".scotch-panel-canvas").css({position:"relative",height:"100%",width:"100%"}),n.settings.useCSS&&g(".scotch-panel-canvas").css({"-moz-transform":"translate3d(0, 0, 0)","-ms-transform":"translate3d(0, 0, 0)","-o-transform":"translate3d(0, 0, 0)","-webkit-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","-webkit-backface-visibility":"hidden","backface-visibility":"hidden"}),"top"==n.settings.direction&&(n.height=n.height(),n.addClass("scotch-panel-top"),n.css({bottom:"100%",left:"0",width:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),"bottom"==n.settings.direction&&(n.height=n.height(),n.addClass("scotch-panel-bottom"),n.css({top:"100%",left:"0",width:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),"left"==n.settings.direction&&(n.addClass("scotch-panel-left"),n.css({top:"0",left:"-"+n.settings.distanceX,width:n.settings.distanceX,height:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),"right"==n.settings.direction&&(n.addClass("scotch-panel-right"),n.css({top:"0",right:"-"+n.settings.distanceX,width:n.settings.distanceX,height:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),n.css({"-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","-webkit-backface-visibility":"hidden","backface-visibility":"hidden"}),"image"==n.settings.type&&n.settings.imageURL&&(n.css({"-o-background-size":"cover","-ms-background-size":"cover","-moz-background-size":"cover","-webkit-background-size":"cover","background-size":"cover","background-position":"50% 0","background-repeat":"no-repeat","background-image":"url("+n.settings.imageURL+")"}),"top"!=n.settings.direction&&"bottom"!=n.settings.direction||(n.css("min-height",n.settings.minHeight),n.height=g(n).height())),"iframe"==n.settings.type&&n.settings.iframeURL&&(n.iframeIsLoaded=!1,n.append('<iframe frameborder="0" style="width: 100%; height: 100%; display: block; position: relative; min-height: '+n.settings.minHeight+'" allowfullscreen></iframe>'),"top"!=n.settings.direction&&"bottom"!=n.settings.direction||(n.height=g(n).height())),"video"==n.settings.type&&n.settings.youtubeID&&(n.append('<div id="video-id-'+n.settings.youtubeID+'" style="min-height: '+n.settings.minHeight+'; display: block !important;"><iframe src="//www.youtube.com/embed/'+n.settings.youtubeID+"?enablejsapi=1&theme="+n.settings.youTubeTheme+'" frameborder="0" style="width: 100%; height: 100%; display: block; position: absolute; left: 0; top: 0;" allowfullscreen></iframe></div>'),"top"!=n.settings.direction&&"bottom"!=n.settings.direction||(n.height=g(n).height())),f&&p&&a(n.settings.transition,n.settings.duration),n.settings.startOpened&&setTimeout(function(){n.open()},n.settings.startOpenedDelay),0!=n.settings.closeAfter&&setTimeout(function(){n.close()},n.settings.closeAfter)},i={transition:function(){if(!window.getComputedStyle)return!1;var t=(document.body||document.documentElement).style,e="transition";if("string"==typeof t[e])return!0;var s=["Moz","webkit","Webkit","Khtml","O","ms"];e=e.charAt(0).toUpperCase()+e.substr(1);for(var n=0;n<s.length;n++)if("string"==typeof t[s[n]+e])return!0;return!1},translate3d:function(){return!!window.getComputedStyle&&((t=document.createElement("p")).style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",t.style.margin="0",document.body.insertBefore(t,document.body.lastChild),void 0!==(e=window.getComputedStyle(t).getPropertyValue("transform"))&&"none"!==e);var t,e}},t=function(t,e){var s=document.getElementById(t),n=s.getElementsByTagName("iframe")[0].contentWindow;s.style.display="hide"==e?"none":"";var i="hide"==e?"pauseVideo":"playVideo";n.postMessage('{"event":"command","func":"'+i+'","args":""}',"*"),s.style.display="block"},a=function(t,e){n.parents(".scotch-panel-canvas:first").css({"-ms-transition":"all "+e+"ms "+t,"-moz-transition":"all "+e+"ms "+t,"-o-transition":"all "+e+"ms "+t,"-webkit-transition":"all "+e+"ms "+t,transition:"all "+e+"ms "+t});var s=n.siblings(".scotch-fixed");s.length&&s.css({"-ms-transition":"all "+e+"ms "+t,"-moz-transition":"all "+e+"ms "+t,"-o-transition":"all "+e+"ms "+t,"-webkit-transition":"all "+e+"ms "+t,transition:"all "+e+"ms "+t})},o=function(t){return 0==(t=parseInt(t))?0:t=0<t?-t:Math.abs(t)},r=function(t){return 0==t?0:(t.indexOf("%")?e="%":t.indexOf("px")&&(e="px"),t=0<(t=parseInt(t))?-t:Math.abs(t),t+=e);var e},c=function(t){var e;(n.settings.forceMinHeight&&n.parents(".scotch-panel-canvas:first").css("min-height",t),f&&p&&n.settings.useCSS)?(n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.beforePanelOpen():n.settings.beforePanelClose(),n.parents(".scotch-panel-canvas:first").css({"-ms-transform":"translate3d(0, "+t+"px, 0)","-moz-transform":"translate3d(0, "+t+"px, 0)","-o-transform":"translate3d(0, "+t+"px, 0)","-webkit-transform":"translate3d(0, "+t+"px, 0)",transform:"translate3d(0, "+t+"px, 0)"}),(e=n.siblings(".scotch-fixed")).length&&(t=o(t),e.css({"-ms-transform":"translate3d(0, "+t+"px, 0)","-moz-transform":"translate3d(0, "+t+"px, 0)","-o-transform":"translate3d(0, "+t+"px, 0)","-webkit-transform":"translate3d(0, "+t+"px, 0)",transform:"translate3d(0, "+t+"px, 0)"})),setTimeout(function(){n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.afterPanelOpen():n.settings.afterPanelClose()},n.settings.duration)):(n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.beforePanelOpen():n.settings.beforePanelClose(),n.settings.useEasingPlugin?(n.parents(".scotch-panel-canvas:first").animate({top:t+"px"},{duration:n.settings.duration,easing:n.settings.easingPluginTransition,complete:function(){n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.afterPanelOpen():n.settings.afterPanelClose()}}),(e=n.siblings(".scotch-fixed")).length&&(t=o(t),e.animate({top:t+"px"},{duration:n.settings.duration,easing:n.settings.easingPluginTransition}))):(n.parents(".scotch-panel-canvas:first").animate({top:t+"px"},n.settings.duration,function(){n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.afterPanelOpen():n.settings.afterPanelClose()}),(e=n.siblings(".scotch-fixed")).length&&(t=o(t),e.animate({top:t+"px"},n.settings.duration))))},l=function(t){var e;f&&p&&n.settings.useCSS?(n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.beforePanelOpen():n.settings.beforePanelClose(),n.parents(".scotch-panel-canvas:first").css({"-ms-transform":"translate3d("+t+", 0, 0)","-moz-transform":"translate3d("+t+", 0, 0)","-o-transform":"translate3d("+t+", 0, 0)","-webkit-transform":"translate3d("+t+", 0, 0)",transform:"translate3d("+t+", 0, 0)"}),(e=n.siblings(".scotch-fixed")).length&&(t=r(t),e.css({"-ms-transform":"translate3d("+t+", 0, 0)","-moz-transform":"translate3d("+t+", 0, 0)","-o-transform":"translate3d("+t+", 0, 0)","-webkit-transform":"translate3d("+t+", 0, 0)",transform:"translate3d("+t+", 0, 0)"})),setTimeout(function(){n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.afterPanelOpen():n.settings.afterPanelClose()},n.settings.duration)):(n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.beforePanelOpen():n.settings.beforePanelClose(),n.settings.useEasingPlugin?(n.parents(".scotch-panel-canvas:first").animate({left:t},{duration:n.settings.duration,easing:n.settings.easingPluginTransition,complete:function(){n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.afterPanelOpen():n.settings.afterPanelClose()}}),(e=n.siblings(".scotch-fixed")).length&&(t=r(t),e.animate({left:t},{duration:n.settings.duration,easing:n.settings.easingPluginTransition}))):(n.parents(".scotch-panel-canvas:first").animate({left:t},n.settings.duration,function(){n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.settings.afterPanelOpen():n.settings.afterPanelClose()}),(e=n.siblings(".scotch-fixed")).length&&(t=r(t),n.parents(".scotch-panel-canvas:first").animate({left:t},n.settings.duration))))};return(n=this).open=function(){n.parents(".scotch-panel-canvas:first").addClass("scotch-is-showing"),"iframe"==n.settings.type&&n.settings.iframeURL&&!n.iframeIsLoaded&&(n.iframeIsLoaded=!0,n.find("iframe").attr("src",n.settings.iframeURL)),"video"==n.settings.type&&n.settings.youtubeID&&n.settings.autoPlayVideo&&t("video-id-"+n.settings.youtubeID,""),"top"==n.settings.direction&&c(n.height),"bottom"==n.settings.direction&&c("-"+n.height),"left"==n.settings.direction&&l(n.settings.distanceX),"right"==n.settings.direction&&l("-"+n.settings.distanceX)},n.close=function(){n.parents(".scotch-panel-canvas:first").removeClass("scotch-is-showing"),setTimeout(function(){"video"==n.settings.type&&n.settings.youtubeID&&n.settings.autoPlayVideo&&t("video-id-"+n.settings.youtubeID,"hide")},n.settings.duration),"top"!=n.settings.direction&&"bottom"!=n.settings.direction||c(0),"left"!=n.settings.direction&&"right"!=n.settings.direction||l(0)},n.toggle=function(){n.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?n.close():n.open()},function(){for(var t in h||(h=!0,f=i.transition(),p=i.translate3d()),u)u.hasOwnProperty(t)&&n.attr("data-"+t.toLowerCase())&&(e[t]=n.data(t.toLowerCase()));n.settings=g.extend({},u,e),s()}(),g(document).keyup(function(t){27==t.keyCode&&n.settings.enableEscapeKey&&n.close()}),n.settings.hoverSelector&&g(n.settings.hoverSelector).hover(function(){n.open()},function(){n.close()}),n.settings.clickSelector&&g(n.settings.clickSelector).click(function(){return n.toggle(),!1}),n.settings.touchSelector&&g(n.settings.touchSelector).on("touchstart",function(){return n.toggle(),!1}),n}}(jQuery);